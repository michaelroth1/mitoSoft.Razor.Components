@page "/counter"

<h1>Counter</h1>

<p>Current count: @currentCount</p>

<button class="btn btn-primary" @onclick="IncrementCount">Click me</button>

<button class="btn btn-primary" @onclick="SetCount">Set Count</button>

<MessageBox @ref=@_messageBox></MessageBox>

<InputBox @ref="@_inputBox" OnOkClicked="@SetCurrentCount"></InputBox>

@code {
    private int currentCount = 0;
    private MessageBox _messageBox;
    private InputBox _inputBox;

    private void IncrementCount()
    {
        currentCount++;

        if (currentCount <= 1)
        {
            this._messageBox.Show("CounterMessage", $"Count: {currentCount}!", Enums.DialogButtons.OK);
        }
        else if (currentCount == 2)
        {
            this._messageBox.Show("CounterMessage", $"Count: {currentCount}!", Enums.DialogButtons.OkCancle);
        }
        else if (currentCount >= 3)
        {
            this._messageBox.Show("CounterMessage", $"Count: {currentCount}!", Enums.DialogButtons.YesNo);
        }
    }

    private void SetCount()
    {
        this._inputBox.Show("Set Count", "Please set new 'currentCount':");
    }

    private void SetCurrentCount(MouseEventArgs e, string result)
    {
        try
        {
            currentCount = int.Parse(result);
            InvokeAsync(StateHasChanged);
        }
        catch { }
    }
}